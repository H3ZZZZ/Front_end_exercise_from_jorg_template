<!DOCTYPE html>
<html lang='en' xmlns='http://www.w3.org/1999/html'>
<head>
    <meta charset='UTF-8' />
    <meta
            name='viewport'
            content='width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0'
    />
    <meta http-equiv='X-UA-Compatible' content='ie=edge' />
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet'>
    <script src='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js'></script>
    <title>Document</title>
</head>
<body>
<!-- Button to Open the Modal -->
<h2>All Persons</h2>
<div style='min-height: 200px;'>
    <table class='table' style='width: 90%'>
        <thead>
        <tr>
            <td>ID</td>
            <td>First Name</td>
            <td>Last name</td>
            <td>Phone</td>
            <td>Street</td>
            <td>Zip</td>
            <td>City</td>
        </tr>
        </thead>
        <tbody id='tbody'></tbody>
    </table>
</div>
<button type='button' id='reload' class='btn btn-secondary'>Reload Data</button>
<button type='button' id='addPerson' class='btn btn-primary' data-bs-toggle='modal' data-bs-target='#myModal'>
    Add New Person
</button>

<!-- The Modal -->
<div class='modal' id='myModal'>
    <div class='modal-dialog'>
        <div class='modal-content'>

            <!-- Modal Header -->
            <div class='modal-header'>
                <h4 class='modal-title'>Modal Heading</h4>
                <button type='button' class='btn-close' data-bs-dismiss='modal'></button>
            </div>

            <!-- Modal body -->
            <form action='' autocomplete='off' id='modal_form'>
                <div class='modal-body'>

                    <input type='hidden' id='id'>
                    <div class='form-group'>
                        <label for='fname'>First Name</label>
                        <input type='text' class='form-control' name='fname' id='fname'>
                    </div>
                    <div class='form-group'>
                        <label for='lname'>Last Name</label>
                        <input type='text' class='form-control' name='lname' id='lname'>
                    </div>
                    <div class='form-group'>
                        <label for='phone'>Phone Number</label>
                        <input type='text' class='form-control' name='phone' id='phone'>
                    </div>
                    <!-- Options Example -->
                    <div class='form-group'>
                        <label for='numberID'>Select Number</label>
                        <select class='form-select' id='numberID'>
                            <option value='' selected>Open this select menu</option>
                            <option value='1'>One</option>
                            <option value='2'>Two</option>
                            <option value='3'>Three</option>
                        </select>
                    </div>

                    <!-- Radio Buttons -->
                    <div class='form-group'>
                        <div class='form-check'>
                            <input class='form-check-input' type='radio' id='contactChoice1' name='contact' value='email' />
                            <label class='form-check-label' for='contactChoice1'>Email</label>
                        </div>
                        <div class='form-check'>
                            <input class='form-check-input' type='radio' id='contactChoice2' name='contact' value='phone' />
                            <label class='form-check-label' for='contactChoice2'>Phone</label>
                        </div>
                        <div class='form-check'>
                            <input class='form-check-input' type='radio' id='contactChoice3' name='contact' value='mail' />
                            <label class='form-check-label' for='contactChoice3'>Mail</label>
                        </div>
                    </div>

                </div>
                <!-- Modal footer -->
                <div class='modal-footer'>
                    <button type='button' class='btn btn-secondary' data-bs-dismiss='modal'>Cancel</button>
                    <button type='submit' class='btn btn-primary' data-bs-dismiss='modal'>Save changes</button>
                </div>
            </form>

        </div>
    </div>
</div>

<script>
    const formId = document.querySelector('#modal_form');

    formId.addEventListener('submit', (e) => {
        e.preventDefault();
        const formData = new FormData(formId);

        // select option
        const numberSelect = '#numberID';

        const obj = {};
        for (const pair of formData.entries()) {
            if (pair[1] !== '') {
                obj[pair[0]] = pair[1];
            }
        }

        let num = update(numberSelect);

        if (num !== '') {
            obj.number = num;
        }

        console.table(obj);
    });

    function update(id) {
        const select = document.querySelector(id);
        const option = select.options[select.selectedIndex];
        return option.value;
    }
</script>
</body>
</html>